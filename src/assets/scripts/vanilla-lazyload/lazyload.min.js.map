{"version":3,"sources":["lazyload.js"],"names":["global","factory","exports","_typeof","module","define","amd","LazyLoad","this","revealElement","element","instance","force","root","settings","container","rootMargin","callbackIfSet","callback_enter","indexOf","tagName","customSettings","addOneShotEventListeners","getInstanceSettings","addClass","_setObserver","class_loading","setSources","update","elements","setWasProcessedData","callback_set","replaceExtToWebp","value","condition","replace","runningOnBrowser","window","isBot","navigator","supportsIntersectionObserver","supportsClassList","createElement","supportsWebp","result","detectWebp","fetch","then","response","blob","webpData","createImageBitmap","elements_selector","data_src","data_srcset","data_sizes","document","data_bg","class_loaded","class_error","load_delay","callback_load","callback_error","callback_finish","to_webp","timeoutDataName","defaultSettings","attrName","dataPrefix","getAttribute","attribute","setData","setAttribute","removeAttribute","processedDataName","setTimeoutData","getData","getTimeoutData","purgeProcessedElements","getWasProcessedData","purgeOneElement","elementToPurge","filter","createInstance","classObj","options","event","eventString","detail","createEvent","dispatchEvent","getSourceTags","parentTag","childTag","sourceTags","i","children","setAttributeIfValue","toWebpFlag","parent","setImageAttributes","VIDEO","setSourcesVideo","srcDataValue","setSourcesFunction","setSourcesFunctions","setValue","_elements","bgDataValue","style","backgroundImage","IMG","parentNode","forEach","sourceTag","_settings","removeClass","_updateLoadingCount","className","setSourcesBgImage","classList","add","errorEventName","addEventListener","eventName","remove","RegExp","addEventListeners","callback","argument","removeEventListeners","success","handler","loadHandler","errorHandler","removeEventListener","eventHandler","managedTags","target","observer","unobserve","cancelDelayLoad","clearTimeout","timeoutId","delayLoad","setTimeout","loadAndUnobserve","isIntersecting","loadDelay","entry","intersectionRatio","getObserverSettings","threshold","_loadingCount","prototype","_manageIntersection","_observer","_onIntersection","entries","length","bind","observe","plusMinus","_this","nodeSet","querySelectorAll","Array","slice","call","load","destroy","_this2","loadAll","_this3","autoInitialize","optionsItem","lazyLoadOptions"],"mappings":"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","file":"lazyload.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.LazyLoad = factory());\n}(this, (function () { 'use strict';\n\nconst replaceExtToWebp = (value, condition) =>\n\tcondition ? value.replace(/\\.(jpe?g|png)/gi, \".webp\") : value;\n\nconst detectWebp = callback => {\n\tvar webpData =\n\t\t\"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\";\n\n\tif (!supportsCreateImageBitmap || !supportsFetch) {\n\t\treturn callback(false);\n\t}\n\n\treturn fetch(webpData).\n\t\tthen(function(response) {\n\t\t\tif (!response || typeof response.blob === \"undefined\") {\n\t\t\t\treturn callback(false);\n\t\t\t}\n\n\t\t\treturn response.blob();\n\t\t}).\n\t\tthen(function(blob) {\n\t\t\tif (window.createImageBitmap(blob)) {\n\t\t\t\treturn callback(true);\n\t\t\t}\n\n\t\t\treturn callback(false);\n\t\t});\n};\n\nconst runningOnBrowser = typeof window !== \"undefined\";\n\nconst isBot =\n\t(runningOnBrowser && !(\"onscroll\" in window)) ||\n\t(typeof navigator !== \"undefined\" &&\n\t\t/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\n\nconst supportsIntersectionObserver =\n\trunningOnBrowser && \"IntersectionObserver\" in window;\n\nconst supportsClassList =\n\trunningOnBrowser && \"classList\" in document.createElement(\"p\");\n\nconst supportsCreateImageBitmap =\n\trunningOnBrowser && \"createImageBitmap\" in window;\n\nconst supportsFetch = runningOnBrowser && \"fetch\" in window;\n\nvar supportsWebp = false;\n\ndetectWebp(result => {\n\tsupportsWebp = result; // Async\n});\n\nconst defaultSettings = {\n\telements_selector: \"img\",\n\tcontainer: isBot || runningOnBrowser ? document : null,\n\tthreshold: 300,\n\tthresholds: null,\n\tdata_src: \"src\",\n\tdata_srcset: \"srcset\",\n\tdata_sizes: \"sizes\",\n\tdata_bg: \"bg\",\n\tclass_loading: \"loading\",\n\tclass_loaded: \"loaded\",\n\tclass_error: \"error\",\n\tload_delay: 0,\n\tcallback_load: null,\n\tcallback_error: null,\n\tcallback_set: null,\n\tcallback_enter: null,\n\tcallback_finish: null,\n\tto_webp: false\n};\n\nvar getInstanceSettings = customSettings => {\n\treturn Object.assign({}, defaultSettings, customSettings);\n};\n\nconst dataPrefix = \"data-\";\nconst processedDataName = \"was-processed\";\nconst timeoutDataName = \"ll-timeout\";\nconst trueString = \"true\";\n\nconst getData = (element, attribute) => {\n\treturn element.getAttribute(dataPrefix + attribute);\n};\n\nconst setData = (element, attribute, value) => {\n\tvar attrName = dataPrefix + attribute;\n\tif (value === null) {\n\t\telement.removeAttribute(attrName);\n\t\treturn;\n\t}\n\telement.setAttribute(attrName, value);\n};\n\nconst setWasProcessedData = element =>\n\tsetData(element, processedDataName, trueString);\n\nconst getWasProcessedData = element =>\n\tgetData(element, processedDataName) === trueString;\n\nconst setTimeoutData = (element, value) =>\n\tsetData(element, timeoutDataName, value);\n\nconst getTimeoutData = element => getData(element, timeoutDataName);\n\nconst purgeProcessedElements = elements => {\n\treturn elements.filter(element => !getWasProcessedData(element));\n};\n\nconst purgeOneElement = (elements, elementToPurge) => {\n\treturn elements.filter(element => element !== elementToPurge);\n};\n\n/* Creates instance and notifies it through the window element */\nconst createInstance = function(classObj, options) {\n\tvar event;\n\tlet eventString = \"LazyLoad::Initialized\";\n\tlet instance = new classObj(options);\n\ttry {\n\t\t// Works in modern browsers\n\t\tevent = new CustomEvent(eventString, { detail: { instance } });\n\t} catch (err) {\n\t\t// Works in Internet Explorer (all versions)\n\t\tevent = document.createEvent(\"CustomEvent\");\n\t\tevent.initCustomEvent(eventString, false, false, { instance });\n\t}\n\twindow.dispatchEvent(event);\n};\n\n/* Auto initialization of one or more instances of lazyload, depending on the \n    options passed in (plain object or an array) */\nfunction autoInitialize(classObj, options) {\n\tif (!options) {\n\t\treturn;\n\t}\n\tif (!options.length) {\n\t\t// Plain object\n\t\tcreateInstance(classObj, options);\n\t} else {\n\t\t// Array of objects\n\t\tfor (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\n\t\t\tcreateInstance(classObj, optionsItem);\n\t\t}\n\t}\n}\n\nconst getSourceTags = parentTag => {\n\tlet sourceTags = [];\n\tfor (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\n\t\tif (childTag.tagName === \"SOURCE\") {\n\t\t\tsourceTags.push(childTag);\n\t\t}\n\t}\n\treturn sourceTags;\n};\n\nconst setAttributeIfValue = function(\n\telement,\n\tattrName,\n\tvalue,\n\ttoWebpFlag\n) {\n\tif (!value) {\n\t\treturn;\n\t}\n\telement.setAttribute(attrName, replaceExtToWebp(value, toWebpFlag));\n};\n\nconst setImageAttributes = (element, settings, toWebpFlag) => {\n\tsetAttributeIfValue(\n\t\telement,\n\t\t\"sizes\",\n\t\tgetData(element, settings.data_sizes)\n\t);\n\tsetAttributeIfValue(\n\t\telement,\n\t\t\"srcset\",\n\t\tgetData(element, settings.data_srcset),\n\t\ttoWebpFlag\n\t);\n\tsetAttributeIfValue(\n\t\telement,\n\t\t\"src\",\n\t\tgetData(element, settings.data_src),\n\t\ttoWebpFlag\n\t);\n};\n\nconst setSourcesImg = (element, settings) => {\n\tconst toWebpFlag = settings.to_webp && supportsWebp;\n\tconst parent = element.parentNode;\n\n\tif (parent && parent.tagName === \"PICTURE\") {\n\t\tlet sourceTags = getSourceTags(parent);\n\t\tsourceTags.forEach(sourceTag => {\n\t\t\tsetImageAttributes(sourceTag, settings, toWebpFlag);\n\t\t});\n\t}\n\n\tsetImageAttributes(element, settings, toWebpFlag);\n};\n\nconst setSourcesIframe = (element, settings) => {\n\tsetAttributeIfValue(element, \"src\", getData(element, settings.data_src));\n};\n\nconst setSourcesVideo = (element, settings) => {\n\tlet sourceTags = getSourceTags(element);\n\tsourceTags.forEach(sourceTag => {\n\t\tsetAttributeIfValue(\n\t\t\tsourceTag,\n\t\t\t\"src\",\n\t\t\tgetData(sourceTag, settings.data_src)\n\t\t);\n\t});\n\tsetAttributeIfValue(element, \"src\", getData(element, settings.data_src));\n\telement.load();\n};\n\nconst setSourcesBgImage = (element, settings) => {\n\tconst toWebpFlag = settings.to_webp && supportsWebp;\n\tconst srcDataValue = getData(element, settings.data_src);\n\tconst bgDataValue = getData(element, settings.data_bg);\n\n\tif (srcDataValue) {\n\t\tlet setValue = replaceExtToWebp(srcDataValue, toWebpFlag);\n\t\telement.style.backgroundImage = `url(\"${setValue}\")`;\n\t}\n\n\tif (bgDataValue) {\n\t\tlet setValue = replaceExtToWebp(bgDataValue, toWebpFlag);\n\t\telement.style.backgroundImage = setValue;\n\t}\n};\n\nconst setSourcesFunctions = {\n\tIMG: setSourcesImg,\n\tIFRAME: setSourcesIframe,\n\tVIDEO: setSourcesVideo\n};\n\nconst setSources = (element, instance) => {\n\tconst settings = instance._settings;\n\tconst tagName = element.tagName;\n\tconst setSourcesFunction = setSourcesFunctions[tagName];\n\tif (setSourcesFunction) {\n\t\tsetSourcesFunction(element, settings);\n\t\tinstance._updateLoadingCount(1);\n\t\tinstance._elements = purgeOneElement(instance._elements, element);\n\t\treturn;\n\t}\n\tsetSourcesBgImage(element, settings);\n};\n\nconst addClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.add(className);\n\t\treturn;\n\t}\n\telement.className += (element.className ? \" \" : \"\") + className;\n};\n\nconst removeClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.remove(className);\n\t\treturn;\n\t}\n\telement.className = element.className.\n\t\treplace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").\n\t\treplace(/^\\s+/, \"\").\n\t\treplace(/\\s+$/, \"\");\n};\n\nconst callbackIfSet = (callback, argument) => {\n\tif (callback) {\n\t\tcallback(argument);\n\t}\n};\n\nconst genericLoadEventName = \"load\";\nconst mediaLoadEventName = \"loadeddata\";\nconst errorEventName = \"error\";\n\nconst addEventListener = (element, eventName, handler) => {\n\telement.addEventListener(eventName, handler);\n};\n\nconst removeEventListener = (element, eventName, handler) => {\n\telement.removeEventListener(eventName, handler);\n};\n\nconst addEventListeners = (element, loadHandler, errorHandler) => {\n\taddEventListener(element, genericLoadEventName, loadHandler);\n\taddEventListener(element, mediaLoadEventName, loadHandler);\n\taddEventListener(element, errorEventName, errorHandler);\n};\n\nconst removeEventListeners = (element, loadHandler, errorHandler) => {\n\tremoveEventListener(element, genericLoadEventName, loadHandler);\n\tremoveEventListener(element, mediaLoadEventName, loadHandler);\n\tremoveEventListener(element, errorEventName, errorHandler);\n};\n\nconst eventHandler = function(event, success, instance) {\n\tvar settings = instance._settings;\n\tconst className = success ? settings.class_loaded : settings.class_error;\n\tconst callback = success ? settings.callback_load : settings.callback_error;\n\tconst element = event.target;\n\n\tremoveClass(element, settings.class_loading);\n\taddClass(element, className);\n\tcallbackIfSet(callback, element);\n\n\tinstance._updateLoadingCount(-1);\n};\n\nconst addOneShotEventListeners = (element, instance) => {\n\tconst loadHandler = event => {\n\t\teventHandler(event, true, instance);\n\t\tremoveEventListeners(element, loadHandler, errorHandler);\n\t};\n\tconst errorHandler = event => {\n\t\teventHandler(event, false, instance);\n\t\tremoveEventListeners(element, loadHandler, errorHandler);\n\t};\n\taddEventListeners(element, loadHandler, errorHandler);\n};\n\nconst managedTags = [\"IMG\", \"IFRAME\", \"VIDEO\"];\n\nconst loadAndUnobserve = (element, observer, instance) => {\n\trevealElement(element, instance);\n\tobserver.unobserve(element);\n};\n\nconst cancelDelayLoad = element => {\n\tvar timeoutId = getTimeoutData(element);\n\tif (!timeoutId) {\n\t\treturn; // do nothing if timeout doesn't exist\n\t}\n\tclearTimeout(timeoutId);\n\tsetTimeoutData(element, null);\n};\n\nconst delayLoad = (element, observer, instance) => {\n\tvar loadDelay = instance._settings.load_delay;\n\tvar timeoutId = getTimeoutData(element);\n\tif (timeoutId) {\n\t\treturn; // do nothing if timeout already set\n\t}\n\ttimeoutId = setTimeout(function() {\n\t\tloadAndUnobserve(element, observer, instance);\n\t\tcancelDelayLoad(element);\n\t}, loadDelay);\n\tsetTimeoutData(element, timeoutId);\n};\n\nfunction revealElement(element, instance, force) {\n\tvar settings = instance._settings;\n\tif (!force && getWasProcessedData(element)) {\n\t\treturn; // element has already been processed and force wasn't true\n\t}\n\tcallbackIfSet(settings.callback_enter, element);\n\tif (managedTags.indexOf(element.tagName) > -1) {\n\t\taddOneShotEventListeners(element, instance);\n\t\taddClass(element, settings.class_loading);\n\t}\n\tsetSources(element, instance);\n\tsetWasProcessedData(element);\n\tcallbackIfSet(settings.callback_set, element);\n}\n\n/* entry.isIntersecting needs fallback because is null on some versions of MS Edge, and\n   entry.intersectionRatio is not enough alone because it could be 0 on some intersecting elements */\nconst isIntersecting = entry =>\n\tentry.isIntersecting || entry.intersectionRatio > 0;\n\nconst getObserverSettings = settings => ({\n\troot: settings.container === document ? null : settings.container,\n\trootMargin: settings.thresholds || settings.threshold + \"px\"\n});\n\nconst LazyLoad = function(customSettings, elements) {\n\tthis._settings = getInstanceSettings(customSettings);\n\tthis._setObserver();\n\tthis._loadingCount = 0;\n\tthis.update(elements);\n};\n\nLazyLoad.prototype = {\n\t_manageIntersection: function(entry) {\n\t\tvar observer = this._observer;\n\t\tvar loadDelay = this._settings.load_delay;\n\t\tvar element = entry.target;\n\n\t\t// WITHOUT LOAD DELAY\n\t\tif (!loadDelay) {\n\t\t\tif (isIntersecting(entry)) {\n\t\t\t\tloadAndUnobserve(element, observer, this);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// WITH LOAD DELAY\n\t\tif (isIntersecting(entry)) {\n\t\t\tdelayLoad(element, observer, this);\n\t\t} else {\n\t\t\tcancelDelayLoad(element);\n\t\t}\n\t},\n\n\t_onIntersection: function(entries) {\n\t\tentries.forEach(this._manageIntersection.bind(this));\n\t},\n\n\t_setObserver: function() {\n\t\tif (!supportsIntersectionObserver) {\n\t\t\treturn;\n\t\t}\n\t\tthis._observer = new IntersectionObserver(\n\t\t\tthis._onIntersection.bind(this),\n\t\t\tgetObserverSettings(this._settings)\n\t\t);\n\t},\n\n\t_updateLoadingCount: function(plusMinus) {\n\t\tthis._loadingCount += plusMinus;\n\t\tif (this._elements.length === 0 && this._loadingCount === 0) {\n\t\t\tcallbackIfSet(this._settings.callback_finish);\n\t\t}\n\t},\n\n\tupdate: function(elements) {\n\t\tconst settings = this._settings;\n\t\tconst nodeSet =\n\t\t\telements ||\n\t\t\tsettings.container.querySelectorAll(settings.elements_selector);\n\n\t\tthis._elements = purgeProcessedElements(\n\t\t\tArray.prototype.slice.call(nodeSet) // NOTE: nodeset to array for IE compatibility\n\t\t);\n\n\t\tif (isBot || !this._observer) {\n\t\t\tthis.loadAll();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._elements.forEach(element => {\n\t\t\tthis._observer.observe(element);\n\t\t});\n\t},\n\n\tdestroy: function() {\n\t\tif (this._observer) {\n\t\t\tthis._elements.forEach(element => {\n\t\t\t\tthis._observer.unobserve(element);\n\t\t\t});\n\t\t\tthis._observer = null;\n\t\t}\n\t\tthis._elements = null;\n\t\tthis._settings = null;\n\t},\n\n\tload: function(element, force) {\n\t\trevealElement(element, this, force);\n\t},\n\n\tloadAll: function() {\n\t\tvar elements = this._elements;\n\t\telements.forEach(element => {\n\t\t\tthis.load(element);\n\t\t});\n\t}\n};\n\n/* Automatic instances creation if required (useful for async script loading) */\nif (runningOnBrowser) {\n\tautoInitialize(LazyLoad, window.lazyLoadOptions);\n}\n\nreturn LazyLoad;\n\n})));\n"]}